(self.webpackChunkprod=self.webpackChunkprod||[]).push([[548],{47715:function(e,t,n){e.exports=function(){"use strict";var e=Function.prototype.toString,t=Object.create,o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getPrototypeOf,a=Object.prototype,l=a.hasOwnProperty,u=a.propertyIsEnumerable,d="function"==typeof c,p="function"==typeof WeakMap,f=function(n,o){if(!n.constructor)return t(null);var r=n.constructor,i=n.__proto__||s(n);if(r===o.Object)return i===o.Object.prototype?{}:t(i);if(~e.call(r).indexOf("[native code]"))try{return new r}catch(e){}return t(i)},v=function(e,t,n,o){var r=f(e,t);for(var i in o.set(e,r),e)l.call(e,i)&&(r[i]=n(e[i],o));if(d){var s=c(e),a=s.length;if(a)for(var p=0,v=void 0;p<a;p++)v=s[p],u.call(e,v)&&(r[v]=n(e[v],o))}return r},$=function(e,t,n,s){var a=f(e,t);s.set(e,a);var l=d?i(e).concat(c(e)):i(e),u=l.length;if(u)for(var p=0,v=void 0,$=void 0;p<u;p++)if("callee"!==(v=l[p])&&"caller"!==v)if($=r(e,v)){$.get||$.set||($.value=n(e[v],s));try{o(a,v,$)}catch(e){a[v]=$.value}}else a[v]=n(e[v],s);return a},g=Array.isArray,m="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:void(console&&console.error&&console.error('Unable to locate global object, returning "this".'));function h(e,n){var o=!(!n||!n.isStrict),r=n&&n.realm||m,i=o?$:v,c=function(e,t){if(!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);var n,s,a,l=e.constructor;if(l===r.Object)return i(e,r,c,t);if(g(e)){if(o)return $(e,r,c,t);var u=e.length;n=new l,t.set(e,n);for(var d=0;d<u;d++)n[d]=c(e[d],t);return n}if(e instanceof r.Date)return new l(e.getTime());if(e instanceof r.RegExp)return(n=new l(e.source,e.flags||(s=e,a="",s.global&&(a+="g"),s.ignoreCase&&(a+="i"),s.multiline&&(a+="m"),s.unicode&&(a+="u"),s.sticky&&(a+="y"),a))).lastIndex=e.lastIndex,n;if(r.Map&&e instanceof r.Map)return n=new l,t.set(e,n),e.forEach((function(e,o){n.set(o,c(e,t))})),n;if(r.Set&&e instanceof r.Set)return n=new l,t.set(e,n),e.forEach((function(e){n.add(c(e,t))})),n;if(r.Blob&&e instanceof r.Blob)return e.slice(0,e.size,e.type);if(r.Buffer&&r.Buffer.isBuffer(e))return n=r.Buffer.allocUnsafe?r.Buffer.allocUnsafe(e.length):new l(e.length),t.set(e,n),e.copy(n),n;if(r.ArrayBuffer){if(r.ArrayBuffer.isView(e))return n=new l(e.buffer.slice(0)),t.set(e,n),n;if(e instanceof r.ArrayBuffer)return n=e.slice(0),t.set(e,n),n}return"function"==typeof e.then||e instanceof Error||r.WeakMap&&e instanceof r.WeakMap||r.WeakSet&&e instanceof r.WeakSet?e:i(e,r,c,t)};return c(e,function(){if(p)return new WeakMap;var e=t({has:function(t){return!!~e._keys.indexOf(t)},set:function(t,n){e._keys.push(t),e._values.push(n)},get:function(t){return e._values[e._keys.indexOf(t)]}});return e._keys=[],e._values=[],e}())}return h.default=h,h.strict=function(e,t){return h(e,{isStrict:!0,realm:t?t.realm:void 0})},h}()},97632:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ne});var o=n(6904),r=n(9479),i=n(3130),c=n(41350),s=n.n(c),a=n(26148),l=n(35107),u=n(9862),d=n(4003),p=Object.defineProperty,f=(e,t)=>p(e,"name",{value:t,configurable:!0});function v(e){let t,n;t=new a.iA({props:{data:e[0],columns:e[1],showHeader:!0},$$inline:!0}),t.$on("rowClick",e[2]);const o={c:f((function(){(0,i.YCL)(t.$$.fragment)}),"create"),l:f((function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")}),"claim"),m:f((function(e,o){(0,i.yef)(t,e,o),n=!0}),"mount"),p:f((function(e,[n]){const o={};1&n&&(o.data=e[0]),t.$set(o)}),"update"),i:f((function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)}),"intro"),o:f((function(e){(0,i.etI)(t.$$.fragment,e),n=!1}),"outro"),d:f((function(e){(0,i.vpE)(t,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:o,id:v.name,type:"component",source:"",ctx:e}),o}function $(e,t,n){let{$$slots:r={},$$scope:c}=t;(0,i.KXV)("EventTable",r,[]);let s,{currentSpace:u}=t;const d=[{label:o.default.string.Title,properties:[{key:"name",property:"label"}],component:a.__},{label:o.default.string.StartTime,properties:[{key:"startsAt",property:"label"}],component:a.__},{label:o.default.string.EndTime,properties:[{key:"endsAt",property:"label"}],component:a.__}],p=(0,l.getClient)(),v=(0,a.mN)();let $,g=[];function m(e){v.navigate({itemId:e.detail.id})}f(m,"onClick");const h=["currentSpace"];return Object.keys(t).forEach((e=>{~h.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<EventTable> was created with unknown prop '${e}'`)})),e.$$set=e=>{"currentSpace"in e&&n(3,u=e.currentSpace)},e.$capture_state=()=>({Table:a.iA,Label:a.__,getRouter:a.mN,getClient:l.getClient,calendar:o.default,currentSpace:u,prevSpace:s,columns:d,client:p,router:v,data:g,lqEvent:$,onClick:m}),e.$inject_state=e=>{"currentSpace"in e&&n(3,u=e.currentSpace),"prevSpace"in e&&n(4,s=e.prevSpace),"data"in e&&n(0,g=e.data),"lqEvent"in e&&n(5,$=e.lqEvent)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{56&e.$$.dirty&&u!==s&&(n(4,s=u),void 0!==u&&n(5,$=p.query($,o.default.class.Event,{space:u},(e=>n(0,g=e)))))},[g,d,m,u,s,$]}f(v,"create_fragment"),f($,"instance");var g=class extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,$,v,i.N8,{currentSpace:3}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"EventTable",options:e,id:v.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[3]||"currentSpace"in n||console.warn("<EventTable> was created without expected prop 'currentSpace'")}get currentSpace(){throw new Error("<EventTable>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set currentSpace(e){throw new Error("<EventTable>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};f(g,"EventTable");var m=g,h="src/components/Workspace.svelte";function b(e){let t,n,o,r,c,s,l;function u(t){e[7](t)}f(u,"icongroup_selected_binding");let d={items:e[3]};void 0!==e[0]&&(d.selected=e[0]),r=new a.Rs({props:d,$$inline:!0}),i.VnY.push((()=>(0,i.akz)(r,"selected",u)));let p=void 0!==e[2]&&w(e);const v={c:f((function(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),o=(0,i.bGB)("div"),(0,i.YCL)(r.$$.fragment),s=(0,i.DhX)(),p&&p.c(),(0,i.LGW)(o,"class","selector svelte-14p8f9h"),(0,i.vjr)(o,h,44,6,1425),(0,i.LGW)(n,"class","content svelte-14p8f9h"),(0,i.vjr)(n,h,43,4,1397),(0,i.LGW)(t,"class","root svelte-14p8f9h"),(0,i.vjr)(t,h,42,2,1374)}),"create"),m:f((function(e,c){(0,i.DsI)(e,t,c),(0,i.gOb)(t,n),(0,i.gOb)(n,o),(0,i.yef)(r,o,null),(0,i.gOb)(n,s),p&&p.m(n,null),l=!0}),"mount"),p:f((function(e,t){const o={};!c&&1&t&&(c=!0,o.selected=e[0],(0,i.hjT)((()=>c=!1))),r.$set(o),void 0!==e[2]?p?(p.p(e,t),4&t&&(0,i.Ui)(p,1)):(p=w(e),p.c(),(0,i.Ui)(p,1),p.m(n,null)):p&&((0,i.dvw)(),(0,i.etI)(p,1,1,(()=>{p=null})),(0,i.gbL)())}),"update"),i:f((function(e){l||((0,i.Ui)(r.$$.fragment,e),(0,i.Ui)(p),l=!0)}),"intro"),o:f((function(e){(0,i.etI)(r.$$.fragment,e),(0,i.etI)(p),l=!1}),"outro"),d:f((function(e){e&&(0,i.GlD)(t),(0,i.vpE)(r),p&&p.d()}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:v,id:b.name,type:"if",source:"(42:0) {#if space !== undefined}",ctx:e}),v}function w(e){let t,n,o;var r=e[2];function c(e){return{props:{currentSpace:e[1]._id},$$inline:!0}}f(c,"switch_props"),r&&(t=new r(c(e)));const s={c:f((function(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()}),"create"),m:f((function(e,r){t&&(0,i.yef)(t,e,r),(0,i.DsI)(e,n,r),o=!0}),"mount"),p:f((function(e,o){const s={};if(2&o&&(s.currentSpace=e[1]._id),r!==(r=e[2])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}r?(t=new r(c(e)),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else r&&t.$set(s)}),"update"),i:f((function(e){o||(t&&(0,i.Ui)(t.$$.fragment,e),o=!0)}),"intro"),o:f((function(e){t&&(0,i.etI)(t.$$.fragment,e),o=!1}),"outro"),d:f((function(e){e&&(0,i.GlD)(n),t&&(0,i.vpE)(t,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:s,id:w.name,type:"if",source:"(48:6) {#if view !== undefined}",ctx:e}),s}function y(e){let t,n,o=void 0!==e[1]&&b(e);const r={c:f((function(){o&&o.c(),t=(0,i.cSb)()}),"create"),l:f((function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")}),"claim"),m:f((function(e,r){o&&o.m(e,r),(0,i.DsI)(e,t,r),n=!0}),"mount"),p:f((function(e,[n]){void 0!==e[1]?o?(o.p(e,n),2&n&&(0,i.Ui)(o,1)):(o=b(e),o.c(),(0,i.Ui)(o,1),o.m(t.parentNode,t)):o&&((0,i.dvw)(),(0,i.etI)(o,1,1,(()=>{o=null})),(0,i.gbL)())}),"update"),i:f((function(e){n||((0,i.Ui)(o),n=!0)}),"intro"),o:f((function(e){(0,i.etI)(o),n=!1}),"outro"),d:f((function(e){o&&o.d(e),e&&(0,i.GlD)(t)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:r,id:y.name,type:"component",source:"",ctx:e}),r}function _(e,t,n){let{$$slots:o={},$$scope:r}=t;(0,i.KXV)("Workspace",o,[]);let c,u,{currentSpace:d}=t;const p=(0,l.getClient)();let v;const $=[{icon:a.Zd,tooltip:a.ZP.string.List,id:"list"}];let g="list";const h=new Map([["list",m]]);let b=m;const w=["currentSpace"];function y(e){g=e,n(0,g)}return Object.keys(t).forEach((e=>{~w.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<Workspace> was created with unknown prop '${e}'`)})),f(y,"icongroup_selected_binding"),e.$$set=e=>{"currentSpace"in e&&n(4,d=e.currentSpace)},e.$capture_state=()=>({core:s(),ui:a.ZP,IconGroup:a.Rs,IconList:a.Zd,getClient:l.getClient,EventTable:m,currentSpace:d,prevSpace:c,space:u,client:p,lq:v,items:$,selected:g,views:h,view:b}),e.$inject_state=e=>{"currentSpace"in e&&n(4,d=e.currentSpace),"prevSpace"in e&&n(5,c=e.prevSpace),"space"in e&&n(1,u=e.space),"lq"in e&&n(6,v=e.lq),"selected"in e&&n(0,g=e.selected),"view"in e&&n(2,b=e.view)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{112&e.$$.dirty&&d!==c&&(n(5,c=d),d&&n(6,v=p.query(v,s().class.Space,{_id:d},(e=>{n(1,u=e[0])})))),1&e.$$.dirty&&n(2,b=h.get(g))},[g,u,b,$,d,c,v,y]}f(b,"create_if_block"),f(w,"create_if_block_1"),f(y,"create_fragment"),f(_,"instance");var E=class extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,_,y,i.N8,{currentSpace:4}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"Workspace",options:e,id:y.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[4]||"currentSpace"in n||console.warn("<Workspace> was created without expected prop 'currentSpace'")}get currentSpace(){throw new Error("<Workspace>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set currentSpace(e){throw new Error("<Workspace>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};f(E,"Workspace");var k=E;function j(e){let t,n,r,c,s,l,u,d,p,v;function $(t){e[2](t)}f($,"editbox_value_binding");let g={label:o.default.string.Name};function m(t){e[3](t)}void 0!==e[0].name&&(g.value=e[0].name),n=new a.k3({props:g,$$inline:!0}),i.VnY.push((()=>(0,i.akz)(n,"value",$))),f(m,"textarea_value_binding");let h={label:o.default.string.Description};function b(t){e[4](t)}void 0!==e[0].description&&(h.value=e[0].description),s=new a.Kx({props:h,$$inline:!0}),i.VnY.push((()=>(0,i.akz)(s,"value",m))),f(b,"togglewithlabel_on_binding");let w={label:o.default.string.MakePrivate,description:o.default.string.MakePrivateDescription};void 0!==e[0].private&&(w.on=e[0].private),d=new a.fL({props:w,$$inline:!0}),i.VnY.push((()=>(0,i.akz)(d,"on",b)));const y={c:f((function(){t=(0,i.bGB)("div"),(0,i.YCL)(n.$$.fragment),c=(0,i.DhX)(),(0,i.YCL)(s.$$.fragment),u=(0,i.DhX)(),(0,i.YCL)(d.$$.fragment),(0,i.LGW)(t,"class","content svelte-sc4c5l"),(0,i.vjr)(t,"src/components/CreateCalendar.svelte",44,2,1963)}),"create"),m:f((function(e,o){(0,i.DsI)(e,t,o),(0,i.yef)(n,t,null),(0,i.gOb)(t,c),(0,i.yef)(s,t,null),(0,i.gOb)(t,u),(0,i.yef)(d,t,null),v=!0}),"mount"),p:f((function(e,t){const o={};!r&&1&t&&(r=!0,o.value=e[0].name,(0,i.hjT)((()=>r=!1))),n.$set(o);const c={};!l&&1&t&&(l=!0,c.value=e[0].description,(0,i.hjT)((()=>l=!1))),s.$set(c);const a={};!p&&1&t&&(p=!0,a.on=e[0].private,(0,i.hjT)((()=>p=!1))),d.$set(a)}),"update"),i:f((function(e){v||((0,i.Ui)(n.$$.fragment,e),(0,i.Ui)(s.$$.fragment,e),(0,i.Ui)(d.$$.fragment,e),v=!0)}),"intro"),o:f((function(e){(0,i.etI)(n.$$.fragment,e),(0,i.etI)(s.$$.fragment,e),(0,i.etI)(d.$$.fragment,e),v=!1}),"outro"),d:f((function(e){e&&(0,i.GlD)(t),(0,i.vpE)(n),(0,i.vpE)(s),(0,i.vpE)(d)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:y,id:j.name,type:"slot",source:"(44:0) <Dialog label={calendar.string.AddCalendar} okLabel={calendar.string.AddCalendar} okAction={createCalendar} on:close>",ctx:e}),y}function C(e){let t,n;t=new a.Vq({props:{label:o.default.string.AddCalendar,okLabel:o.default.string.AddCalendar,okAction:e[1],$$slots:{default:[j]},$$scope:{ctx:e}},$$inline:!0}),t.$on("close",e[5]);const r={c:f((function(){(0,i.YCL)(t.$$.fragment)}),"create"),l:f((function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")}),"claim"),m:f((function(e,o){(0,i.yef)(t,e,o),n=!0}),"mount"),p:f((function(e,[n]){const o={};257&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)}),"update"),i:f((function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)}),"intro"),o:f((function(e){(0,i.etI)(t.$$.fragment,e),n=!1}),"outro"),d:f((function(e){(0,i.vpE)(t,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:r,id:C.name,type:"component",source:"",ctx:e}),r}function x(e,t,n){let{$$slots:r={},$$scope:c}=t;(0,i.KXV)("CreateCalendar",r,[]);var u=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return f(r,"adopt"),new(n||(n=Promise))((function(n,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){e.done?n(e.value):r(e.value).then(c,s)}f(c,"fulfilled"),f(s,"rejected"),f(a,"step"),a((o=o.apply(e,t||[])).next())}))};const d=(0,l.getClient)(),p={name:"",description:"",private:!1,members:[d.accountId()]};function v(){return u(this,void 0,void 0,(function*(){yield d.createDoc(o.default.class.Calendar,s().space.Model,p)}))}f(v,"createCalendar");const $=[];function g(t){e.$$.not_equal(p.name,t)&&(p.name=t,n(0,p))}function m(t){e.$$.not_equal(p.description,t)&&(p.description=t,n(0,p))}function h(t){e.$$.not_equal(p.private,t)&&(p.private=t,n(0,p))}function b(t){i.cKT.call(this,e,t)}return Object.keys(t).forEach((e=>{~$.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<CreateCalendar> was created with unknown prop '${e}'`)})),f(g,"editbox_value_binding"),f(m,"textarea_value_binding"),f(h,"togglewithlabel_on_binding"),f(b,"close_handler"),e.$capture_state=()=>({__awaiter:u,core:s(),EditBox:a.k3,Dialog:a.Vq,ToggleWithLabel:a.fL,TextArea:a.Kx,getClient:l.getClient,calendar:o.default,client:d,space:p,createCalendar:v}),e.$inject_state=e=>{"__awaiter"in e&&(u=e.__awaiter)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[p,v,g,m,h,b]}f(j,"create_default_slot"),f(C,"create_fragment"),f(x,"instance");var S=class extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,x,C,i.N8,{}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"CreateCalendar",options:e,id:C.name})}};f(S,"CreateCalendar");var D=S;function O(e){let t,n,r,c,s,l,u,d,p,v,$,g,m;function h(t){e[6](t)}f(h,"editbox_value_binding");let b={label:o.default.string.Title};function w(t){e[7](t)}void 0!==e[0].name&&(b.value=e[0].name),n=new a.k3({props:b,$$inline:!0}),i.VnY.push((()=>(0,i.akz)(n,"value",h))),n.$on("blur",e[2]),f(w,"textarea_value_binding");let y={label:o.default.string.Description};void 0!==e[0].description&&(y.value=e[0].description),s=new a.Kx({props:y,$$inline:!0}),i.VnY.push((()=>(0,i.akz)(s,"value",w))),s.$on("blur",e[2]),d=new a.Mt({props:{title:o.default.string.StartTime,selected:new Date(e[0].startsAt)},$$inline:!0}),d.$on("change",e[3]("startsAt")),v=new a.Mt({props:{title:o.default.string.EndTime,selected:new Date(e[0].endsAt)},$$inline:!0}),v.$on("change",e[3]("endsAt")),g=new a.jL({props:{items:e[1],component:a.ao},$$inline:!0});const _={c:f((function(){t=(0,i.bGB)("div"),(0,i.YCL)(n.$$.fragment),c=(0,i.DhX)(),(0,i.YCL)(s.$$.fragment),u=(0,i.DhX)(),(0,i.YCL)(d.$$.fragment),p=(0,i.DhX)(),(0,i.YCL)(v.$$.fragment),$=(0,i.DhX)(),(0,i.YCL)(g.$$.fragment),(0,i.LGW)(t,"class","root svelte-19w1zzs"),(0,i.vjr)(t,"src/components/EventEditor.svelte",60,0,1900)}),"create"),l:f((function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")}),"claim"),m:f((function(e,o){(0,i.DsI)(e,t,o),(0,i.yef)(n,t,null),(0,i.gOb)(t,c),(0,i.yef)(s,t,null),(0,i.gOb)(t,u),(0,i.yef)(d,t,null),(0,i.gOb)(t,p),(0,i.yef)(v,t,null),(0,i.gOb)(t,$),(0,i.yef)(g,t,null),m=!0}),"mount"),p:f((function(e,[t]){const o={};!r&&1&t&&(r=!0,o.value=e[0].name,(0,i.hjT)((()=>r=!1))),n.$set(o);const c={};!l&&1&t&&(l=!0,c.value=e[0].description,(0,i.hjT)((()=>l=!1))),s.$set(c);const a={};1&t&&(a.selected=new Date(e[0].startsAt)),d.$set(a);const u={};1&t&&(u.selected=new Date(e[0].endsAt)),v.$set(u);const p={};2&t&&(p.items=e[1]),g.$set(p)}),"update"),i:f((function(e){m||((0,i.Ui)(n.$$.fragment,e),(0,i.Ui)(s.$$.fragment,e),(0,i.Ui)(d.$$.fragment,e),(0,i.Ui)(v.$$.fragment,e),(0,i.Ui)(g.$$.fragment,e),m=!0)}),"intro"),o:f((function(e){(0,i.etI)(n.$$.fragment,e),(0,i.etI)(s.$$.fragment,e),(0,i.etI)(d.$$.fragment,e),(0,i.etI)(v.$$.fragment,e),(0,i.etI)(g.$$.fragment,e),m=!1}),"outro"),d:f((function(e){e&&(0,i.GlD)(t),(0,i.vpE)(n),(0,i.vpE)(s),(0,i.vpE)(d),(0,i.vpE)(v),(0,i.vpE)(g)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:_,id:O.name,type:"component",source:"",ctx:e}),_}function L(e,t,n){let{$$slots:r={},$$scope:c}=t;(0,i.KXV)("EventEditor",r,[]);let{event:p}=t;const v=(0,l.getClient)(),$=(0,u.createEventDispatcher)();let g,m=[],h=[];function b(){$("update")}f(b,"onUpdate");const w=f((e=>({detail:t})=>{n(0,p[e]=t.getTime(),p),b()}),"onDateUpdate"),y=["event"];function _(t){e.$$.not_equal(p.name,t)&&(p.name=t,n(0,p),n(4,m),n(5,g))}function E(t){e.$$.not_equal(p.description,t)&&(p.description=t,n(0,p),n(4,m),n(5,g))}return Object.keys(t).forEach((e=>{~y.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<EventEditor> was created with unknown prop '${e}'`)})),f(_,"editbox_value_binding"),f(E,"textarea_value_binding"),e.$$set=e=>{"event"in e&&n(0,p=e.event)},e.$capture_state=()=>({createEventDispatcher:u.createEventDispatcher,core:s(),calendar:o.default,EditBox:a.k3,TextArea:a.Kx,DatePicker:a.Mt,IPopupItem:a.IPopupItem,UserInfo:a.ao,SelectBox:a.jL,getClient:l.getClient,QueryUpdater:d.QueryUpdater,event:p,client:v,dispatch:$,accounts:m,lqAccounts:g,selectorItems:h,onUpdate:b,onDateUpdate:w}),e.$inject_state=e=>{"event"in e&&n(0,p=e.event),"accounts"in e&&n(4,m=e.accounts),"lqAccounts"in e&&n(5,g=e.lqAccounts),"selectorItems"in e&&n(1,h=e.selectorItems)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{32&e.$$.dirty&&n(5,g=v.query(g,s().class.Account,{},(e=>{n(4,m=e)}))),17&e.$$.dirty&&n(1,h=m.map((e=>({props:{user:e},selected:p.participants.includes(e._id),action:()=>{e._id!==p.owner&&(n(0,p.participants=[...p.participants,e._id],p),b())},onDeselect:()=>{if(e._id===p.owner)return!1;n(0,p.participants=p.participants.filter((t=>t!==e._id)),p),b()}}))))},[p,h,b,w,m,g,_,E]}f(O,"create_fragment"),f(L,"instance");var I=class extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,L,O,i.N8,{event:0}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"EventEditor",options:e,id:O.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"event"in n||console.warn("<EventEditor> was created without expected prop 'event'")}get event(){throw new Error("<EventEditor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set event(e){throw new Error("<EventEditor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};f(I,"EventEditor");var G=I;function B(e){let t,n,o;function r(t){e[4](t)}f(r,"eventeditor_event_binding");let c={};void 0!==e[0]&&(c.event=e[0]),t=new G({props:c,$$inline:!0}),i.VnY.push((()=>(0,i.akz)(t,"event",r)));const s={c:f((function(){(0,i.YCL)(t.$$.fragment)}),"create"),m:f((function(e,n){(0,i.yef)(t,e,n),o=!0}),"mount"),p:f((function(e,o){const r={};!n&&1&o&&(n=!0,r.event=e[0],(0,i.hjT)((()=>n=!1))),t.$set(r)}),"update"),i:f((function(e){o||((0,i.Ui)(t.$$.fragment,e),o=!0)}),"intro"),o:f((function(e){(0,i.etI)(t.$$.fragment,e),o=!1}),"outro"),d:f((function(e){(0,i.vpE)(t,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:s,id:B.name,type:"slot",source:"(51:0) <Dialog   label={calendar.string.AddEvent}   okLabel={calendar.string.AddEvent}   okAction={create}   on:close={() => dispatch('close')} >",ctx:e}),s}function Y(e){let t,n;t=new a.Vq({props:{label:o.default.string.AddEvent,okLabel:o.default.string.AddEvent,okAction:e[2],$$slots:{default:[B]},$$scope:{ctx:e}},$$inline:!0}),t.$on("close",e[5]);const r={c:f((function(){(0,i.YCL)(t.$$.fragment)}),"create"),l:f((function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")}),"claim"),m:f((function(e,o){(0,i.yef)(t,e,o),n=!0}),"mount"),p:f((function(e,[n]){const o={};513&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)}),"update"),i:f((function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)}),"intro"),o:f((function(e){(0,i.etI)(t.$$.fragment,e),n=!1}),"outro"),d:f((function(e){(0,i.vpE)(t,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:r,id:Y.name,type:"component",source:"",ctx:e}),r}function U(e,t,n){let{$$slots:r={},$$scope:c}=t;(0,i.KXV)("CreateEvent",r,[]);var s=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return f(r,"adopt"),new(n||(n=Promise))((function(n,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){e.done?n(e.value):r(e.value).then(c,s)}f(c,"fulfilled"),f(s,"rejected"),f(a,"step"),a((o=o.apply(e,t||[])).next())}))};const d=(0,u.createEventDispatcher)();let{space:p}=t;const v=(0,l.getClient)(),$=v.accountId();let g={name:"",description:"",startsAt:(new Date).getTime(),endsAt:(new Date).getTime(),owner:$,participants:[$],version:0};function m(){return s(this,void 0,void 0,(function*(){yield v.createDoc(o.default.class.Event,p._id,g)}))}f(m,"create");const h=["space"];function b(e){g=e,n(0,g)}Object.keys(t).forEach((e=>{~h.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<CreateEvent> was created with unknown prop '${e}'`)})),f(b,"eventeditor_event_binding");const w=f((()=>d("close")),"close_handler");return e.$$set=e=>{"space"in e&&n(3,p=e.space)},e.$capture_state=()=>({__awaiter:s,createEventDispatcher:u.createEventDispatcher,calendar:o.default,Dialog:a.Vq,getClient:l.getClient,EventEditor:G,dispatch:d,space:p,client:v,owner:$,event:g,create:m}),e.$inject_state=e=>{"__awaiter"in e&&(s=e.__awaiter),"space"in e&&n(3,p=e.space),"event"in e&&n(0,g=e.event)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[g,d,m,p,b,w]}f(B,"create_default_slot"),f(Y,"create_fragment"),f(U,"instance");var A=class extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,U,Y,i.N8,{space:3}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"CreateEvent",options:e,id:Y.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[3]||"space"in n||console.warn("<CreateEvent> was created without expected prop 'space'")}get space(){throw new Error("<CreateEvent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set space(e){throw new Error("<CreateEvent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};f(A,"CreateEvent");var W=A,P="src/components/EventViewer.svelte";function T(e,t,n){const o=e.slice();return o[4]=t[n],o}function R(e,t){let n,o,r;o=new a.ao({props:{user:t[4]},$$inline:!0});const c={key:e,first:null,c:f((function(){n=(0,i.cSb)(),(0,i.YCL)(o.$$.fragment),this.first=n}),"create"),m:f((function(e,t){(0,i.DsI)(e,n,t),(0,i.yef)(o,e,t),r=!0}),"mount"),p:f((function(e,n){t=e;const r={};2&n&&(r.user=t[4]),o.$set(r)}),"update"),i:f((function(e){r||((0,i.Ui)(o.$$.fragment,e),r=!0)}),"intro"),o:f((function(e){(0,i.etI)(o.$$.fragment,e),r=!1}),"outro"),d:f((function(e){e&&(0,i.GlD)(n),(0,i.vpE)(o,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:c,id:R.name,type:"each",source:"(71:6) {#each accounts as account (account._id)}",ctx:t}),c}function q(e){let t,n,r,c,s,l,u,d,p,v,$,g,m,h,b,w,y,_,E,k,j,C,x,S,D,O,L,I,G,B,Y,U,A,W,V,Z=e[0].name+"",N=e[0].description+"",X=new Date(e[0].startsAt).toLocaleString()+"",M=new Date(e[0].endsAt).toLocaleString()+"",z=[],K=new Map;c=new a.__({props:{label:o.default.string.Title},$$inline:!0}),$=new a.__({props:{label:o.default.string.Description},$$inline:!0}),_=new a.__({props:{label:o.default.string.StartTime},$$inline:!0}),D=new a.__({props:{label:o.default.string.EndTime},$$inline:!0}),U=new a.__({props:{label:o.default.string.Participants},$$inline:!0});let Q=e[1];(0,i.vzG)(Q);const H=f((e=>e[4]._id),"get_key");(0,i.HeV)(e,Q,T,H);for(let t=0;t<Q.length;t+=1){let n=T(e,Q,t),o=H(n);K.set(o,z[t]=R(o,n))}const F={c:f((function(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),r=(0,i.bGB)("div"),(0,i.YCL)(c.$$.fragment),s=(0,i.DhX)(),l=(0,i.bGB)("div"),u=(0,i.fLW)(Z),d=(0,i.DhX)(),p=(0,i.bGB)("div"),v=(0,i.bGB)("div"),(0,i.YCL)($.$$.fragment),g=(0,i.DhX)(),m=(0,i.bGB)("div"),h=(0,i.fLW)(N),b=(0,i.DhX)(),w=(0,i.bGB)("div"),y=(0,i.bGB)("div"),(0,i.YCL)(_.$$.fragment),E=(0,i.DhX)(),k=(0,i.bGB)("div"),j=(0,i.fLW)(X),C=(0,i.DhX)(),x=(0,i.bGB)("div"),S=(0,i.bGB)("div"),(0,i.YCL)(D.$$.fragment),O=(0,i.DhX)(),L=(0,i.bGB)("div"),I=(0,i.fLW)(M),G=(0,i.DhX)(),B=(0,i.bGB)("div"),Y=(0,i.bGB)("div"),(0,i.YCL)(U.$$.fragment),A=(0,i.DhX)(),W=(0,i.bGB)("div");for(let e=0;e<z.length;e+=1)z[e].c();(0,i.LGW)(r,"class","label svelte-73vfpy"),(0,i.vjr)(r,P,34,4,1244),(0,i.vjr)(l,P,37,4,1325),(0,i.LGW)(n,"class","row svelte-73vfpy"),(0,i.vjr)(n,P,33,2,1222),(0,i.LGW)(v,"class","label svelte-73vfpy"),(0,i.vjr)(v,P,42,4,1394),(0,i.vjr)(m,P,45,4,1481),(0,i.LGW)(p,"class","row svelte-73vfpy"),(0,i.vjr)(p,P,41,2,1372),(0,i.LGW)(y,"class","label svelte-73vfpy"),(0,i.vjr)(y,P,50,4,1557),(0,i.vjr)(k,P,53,4,1642),(0,i.LGW)(w,"class","row svelte-73vfpy"),(0,i.vjr)(w,P,49,2,1535),(0,i.LGW)(S,"class","label svelte-73vfpy"),(0,i.vjr)(S,P,58,4,1742),(0,i.vjr)(L,P,61,4,1825),(0,i.LGW)(x,"class","row svelte-73vfpy"),(0,i.vjr)(x,P,57,2,1720),(0,i.LGW)(Y,"class","label svelte-73vfpy"),(0,i.vjr)(Y,P,66,4,1923),(0,i.LGW)(W,"class","participants svelte-73vfpy"),(0,i.vjr)(W,P,69,4,2011),(0,i.LGW)(B,"class","row svelte-73vfpy"),(0,i.vjr)(B,P,65,2,1901),(0,i.LGW)(t,"class","root svelte-73vfpy"),(0,i.vjr)(t,P,32,0,1201)}),"create"),l:f((function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")}),"claim"),m:f((function(e,o){(0,i.DsI)(e,t,o),(0,i.gOb)(t,n),(0,i.gOb)(n,r),(0,i.yef)(c,r,null),(0,i.gOb)(n,s),(0,i.gOb)(n,l),(0,i.gOb)(l,u),(0,i.gOb)(t,d),(0,i.gOb)(t,p),(0,i.gOb)(p,v),(0,i.yef)($,v,null),(0,i.gOb)(p,g),(0,i.gOb)(p,m),(0,i.gOb)(m,h),(0,i.gOb)(t,b),(0,i.gOb)(t,w),(0,i.gOb)(w,y),(0,i.yef)(_,y,null),(0,i.gOb)(w,E),(0,i.gOb)(w,k),(0,i.gOb)(k,j),(0,i.gOb)(t,C),(0,i.gOb)(t,x),(0,i.gOb)(x,S),(0,i.yef)(D,S,null),(0,i.gOb)(x,O),(0,i.gOb)(x,L),(0,i.gOb)(L,I),(0,i.gOb)(t,G),(0,i.gOb)(t,B),(0,i.gOb)(B,Y),(0,i.yef)(U,Y,null),(0,i.gOb)(B,A),(0,i.gOb)(B,W);for(let e=0;e<z.length;e+=1)z[e].m(W,null);V=!0}),"mount"),p:f((function(e,[t]){(!V||1&t)&&Z!==(Z=e[0].name+"")&&(0,i.Lob)(u,Z),(!V||1&t)&&N!==(N=e[0].description+"")&&(0,i.Lob)(h,N),(!V||1&t)&&X!==(X=new Date(e[0].startsAt).toLocaleString()+"")&&(0,i.Lob)(j,X),(!V||1&t)&&M!==(M=new Date(e[0].endsAt).toLocaleString()+"")&&(0,i.Lob)(I,M),2&t&&(Q=e[1],(0,i.vzG)(Q),(0,i.dvw)(),(0,i.HeV)(e,Q,T,H),z=(0,i.GQg)(z,t,H,1,e,Q,K,W,i.cly,R,null,T),(0,i.gbL)())}),"update"),i:f((function(e){if(!V){(0,i.Ui)(c.$$.fragment,e),(0,i.Ui)($.$$.fragment,e),(0,i.Ui)(_.$$.fragment,e),(0,i.Ui)(D.$$.fragment,e),(0,i.Ui)(U.$$.fragment,e);for(let e=0;e<Q.length;e+=1)(0,i.Ui)(z[e]);V=!0}}),"intro"),o:f((function(e){(0,i.etI)(c.$$.fragment,e),(0,i.etI)($.$$.fragment,e),(0,i.etI)(_.$$.fragment,e),(0,i.etI)(D.$$.fragment,e),(0,i.etI)(U.$$.fragment,e);for(let e=0;e<z.length;e+=1)(0,i.etI)(z[e]);V=!1}),"outro"),d:f((function(e){e&&(0,i.GlD)(t),(0,i.vpE)(c),(0,i.vpE)($),(0,i.vpE)(_),(0,i.vpE)(D),(0,i.vpE)(U);for(let e=0;e<z.length;e+=1)z[e].d()}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:F,id:q.name,type:"component",source:"",ctx:e}),F}function V(e,t,n){let{$$slots:r={},$$scope:c}=t;(0,i.KXV)("EventViewer",r,[]);let{event:u}=t;const p=(0,l.getClient)();let f,v=[];const $=["event"];return Object.keys(t).forEach((e=>{~$.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<EventViewer> was created with unknown prop '${e}'`)})),e.$$set=e=>{"event"in e&&n(0,u=e.event)},e.$capture_state=()=>({core:s(),calendar:o.default,UserInfo:a.ao,Label:a.__,getClient:l.getClient,QueryUpdater:d.QueryUpdater,event:u,client:p,accounts:v,lqAccounts:f}),e.$inject_state=e=>{"event"in e&&n(0,u=e.event),"accounts"in e&&n(1,v=e.accounts),"lqAccounts"in e&&n(2,f=e.lqAccounts)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{5&e.$$.dirty&&n(2,f=p.query(f,s().class.Account,{_id:{$in:u.participants}},(e=>{n(1,v=u.participants.map((t=>e.find((e=>e._id===t)))).filter((e=>void 0!==e)))})))},[u,v,f]}f(T,"get_each_context"),f(R,"create_each_block"),f(q,"create_fragment"),f(V,"instance");var Z=class extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,V,q,i.N8,{event:0}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"EventViewer",options:e,id:q.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"event"in n||console.warn("<EventViewer> was created without expected prop 'event'")}get event(){throw new Error("<EventViewer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set event(e){throw new Error("<EventViewer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};f(Z,"EventViewer");var N=Z,{Object:X}=i.lig,M="src/components/EditEvent.svelte";function z(e){let t,n,o,r,c,s,l,u,d,p,v,$=e[0].name+"";s=new a.bM({props:{size:16},$$inline:!0}),u=new a.De({props:{autoscrollable:!0,vertical:!0,$$slots:{default:[H]},$$scope:{ctx:e}},$$inline:!0});const g={c:f((function(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),o=(0,i.fLW)($),r=(0,i.DhX)(),c=(0,i.bGB)("div"),(0,i.YCL)(s.$$.fragment),l=(0,i.DhX)(),(0,i.YCL)(u.$$.fragment),(0,i.LGW)(n,"class","title svelte-2gda8s"),(0,i.vjr)(n,M,70,4,2767),(0,i.LGW)(c,"class","close svelte-2gda8s"),(0,i.vjr)(c,M,73,4,2821),(0,i.LGW)(t,"class","header svelte-2gda8s"),(0,i.vjr)(t,M,69,2,2742)}),"create"),m:f((function(a,f){(0,i.DsI)(a,t,f),(0,i.gOb)(t,n),(0,i.gOb)(n,o),(0,i.gOb)(t,r),(0,i.gOb)(t,c),(0,i.yef)(s,c,null),(0,i.DsI)(a,l,f),(0,i.yef)(u,a,f),d=!0,p||(v=(0,i.iVk)(c,"click",e[3],!1,!1,!1),p=!0)}),"mount"),p:f((function(e,t){(!d||1&t)&&$!==($=e[0].name+"")&&(0,i.Lob)(o,$);const n={};1027&t&&(n.$$scope={dirty:t,ctx:e}),u.$set(n)}),"update"),i:f((function(e){d||((0,i.Ui)(s.$$.fragment,e),(0,i.Ui)(u.$$.fragment,e),d=!0)}),"intro"),o:f((function(e){(0,i.etI)(s.$$.fragment,e),(0,i.etI)(u.$$.fragment,e),d=!1}),"outro"),d:f((function(e){e&&(0,i.GlD)(t),(0,i.vpE)(s),e&&(0,i.GlD)(l),(0,i.vpE)(u,e),p=!1,v()}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:g,id:z.name,type:"if",source:"(69:0) {#if event !== undefined}",ctx:e}),g}function K(e){let t,n;t=new G({props:{event:e[0]},$$inline:!0}),t.$on("update",e[2]);const o={c:f((function(){(0,i.YCL)(t.$$.fragment)}),"create"),m:f((function(e,o){(0,i.yef)(t,e,o),n=!0}),"mount"),p:f((function(e,n){const o={};1&n&&(o.event=e[0]),t.$set(o)}),"update"),i:f((function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)}),"intro"),o:f((function(e){(0,i.etI)(t.$$.fragment,e),n=!1}),"outro"),d:f((function(e){(0,i.vpE)(t,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:o,id:K.name,type:"else",source:"(81:4) {:else}",ctx:e}),o}function Q(e){let t,n;t=new N({props:{event:e[0]},$$inline:!0});const o={c:f((function(){(0,i.YCL)(t.$$.fragment)}),"create"),m:f((function(e,o){(0,i.yef)(t,e,o),n=!0}),"mount"),p:f((function(e,n){const o={};1&n&&(o.event=e[0]),t.$set(o)}),"update"),i:f((function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)}),"intro"),o:f((function(e){(0,i.etI)(t.$$.fragment,e),n=!1}),"outro"),d:f((function(e){(0,i.vpE)(t,e)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:o,id:Q.name,type:"if",source:"(79:4) {#if isDerived}",ctx:e}),o}function H(e){let t,n,o,r;const c=[Q,K],s=[];function a(e,t){return e[1]?0:1}f(a,"select_block_type"),t=a(e),n=s[t]=c[t](e);const l={c:f((function(){n.c(),o=(0,i.cSb)()}),"create"),m:f((function(e,n){s[t].m(e,n),(0,i.DsI)(e,o,n),r=!0}),"mount"),p:f((function(e,r){let l=t;t=a(e),t===l?s[t].p(e,r):((0,i.dvw)(),(0,i.etI)(s[l],1,1,(()=>{s[l]=null})),(0,i.gbL)(),n=s[t],n?n.p(e,r):(n=s[t]=c[t](e),n.c()),(0,i.Ui)(n,1),n.m(o.parentNode,o))}),"update"),i:f((function(e){r||((0,i.Ui)(n),r=!0)}),"intro"),o:f((function(e){(0,i.etI)(n),r=!1}),"outro"),d:f((function(e){s[t].d(e),e&&(0,i.GlD)(o)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:l,id:H.name,type:"slot",source:"(78:2) <ScrollBox autoscrollable vertical>",ctx:e}),l}function F(e){let t,n,o=void 0!==e[0]&&z(e);const r={c:f((function(){o&&o.c(),t=(0,i.cSb)()}),"create"),l:f((function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")}),"claim"),m:f((function(e,r){o&&o.m(e,r),(0,i.DsI)(e,t,r),n=!0}),"mount"),p:f((function(e,[n]){void 0!==e[0]?o?(o.p(e,n),1&n&&(0,i.Ui)(o,1)):(o=z(e),o.c(),(0,i.Ui)(o,1),o.m(t.parentNode,t)):o&&((0,i.dvw)(),(0,i.etI)(o,1,1,(()=>{o=null})),(0,i.gbL)())}),"update"),i:f((function(e){n||((0,i.Ui)(o),n=!0)}),"intro"),o:f((function(e){(0,i.etI)(o),n=!1}),"outro"),d:f((function(e){o&&o.d(e),e&&(0,i.GlD)(t)}),"destroy")};return(0,i.YyZ)("SvelteRegisterBlock",{block:r,id:F.name,type:"component",source:"",ctx:e}),r}function J(e,t,n){let{$$slots:r={},$$scope:c}=t;(0,i.KXV)("EditEvent",r,[]);var s=this&&this.__awaiter||function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return f(r,"adopt"),new(n||(n=Promise))((function(n,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){e.done?n(e.value):r(e.value).then(c,s)}f(c,"fulfilled"),f(s,"rejected"),f(a,"step"),a((o=o.apply(e,t||[])).next())}))};let{id:u}=t;const d=(0,l.getClient)(),p=(0,a.mN)();let v,$,g,m=!1;function h(){return s(this,void 0,void 0,(function*(){if(void 0===v||void 0===$)return;const e=v,t=$,n=Object.keys(v).reduce(((n,o)=>t[o]===e[o]?n:Object.assign(Object.assign({},n),{[o]:e[o]})),{});0!==Object.getOwnPropertyNames(n).length&&(yield d.updateDoc(o.default.class.Event,t.space,t._id,n))}))}function b(){p.navigate({itemId:void 0})}f(h,"onUpdate"),f(b,"onClose");const w=["id"];return X.keys(t).forEach((e=>{~w.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<EditEvent> was created with unknown prop '${e}'`)})),e.$$set=e=>{"id"in e&&n(4,u=e.id)},e.$capture_state=()=>({__awaiter:s,calendar:o.default,getClient:l.getClient,getRouter:a.mN,IconClose:a.bM,ScrollBox:a.De,EventEditor:G,EventViewer:N,id:u,client:d,router:p,event:v,prevEvent:$,lqEvent:g,isDerived:m,onUpdate:h,onClose:b}),e.$inject_state=e=>{"__awaiter"in e&&(s=e.__awaiter),"id"in e&&n(4,u=e.id),"event"in e&&n(0,v=e.event),"prevEvent"in e&&($=e.prevEvent),"lqEvent"in e&&n(5,g=e.lqEvent),"isDerived"in e&&n(1,m=e.isDerived)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{48&e.$$.dirty&&n(5,g=d.query(g,o.default.class.Event,{_id:u},(e=>{const t=e[0];t&&(n(0,v=Object.assign({},t)),$=Object.assign({},t))}))),1&e.$$.dirty&&n(1,m=(null==v?void 0:v._class)===o.default.class.DerivedEvent)},[v,m,h,b,u,g]}f(z,"create_if_block"),f(K,"create_else_block"),f(Q,"create_if_block_1"),f(H,"create_default_slot"),f(F,"create_fragment"),f(J,"instance");var ee=class extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,J,F,i.N8,{id:4}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"EditEvent",options:e,id:F.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[4]||"id"in n||console.warn("<EditEvent> was created without expected prop 'id'")}get id(){throw new Error("<EditEvent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(e){throw new Error("<EditEvent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};f(ee,"EditEvent");var te=ee,ne=f((()=>{return void 0,null,e=function*(){return(0,r.setResource)(o.default.component.Workspace,k),(0,r.setResource)(o.default.component.CreateCalendar,D),(0,r.setResource)(o.default.component.CreateEvent,W),(0,r.setResource)(o.default.component.EditEvent,te),{}},new Promise(((t,n)=>{var o=t=>{try{i(e.next(t))}catch(e){n(e)}},r=t=>{try{i(e.throw(t))}catch(e){n(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,r);i((e=e.apply(undefined,null)).next())}));var e}),"default")},4003:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PresentationClient=void 0;const r=n(9479),i=n(72451),c=n(9862);class s{constructor(e,t){this.client=e,this.callback=t,c.onDestroy((()=>{var e;null===(e=this.unsubscribe)||void 0===e||e.call(this),this.unsubscribe=void 0}))}update(e,t,n){var o;this.checkParams(t,e,n)||(null===(o=this.unsubscribe)||void 0===o||o.call(this),this.oldQuery=t,this.oldClass=e,this.oldOptions=n,this.client().then((o=>{this.unsubscribe=o.query(e,t,this.callback,n)})).catch((e=>{console.error(e)})))}checkParams(e,t,n){return i.deepEqual(this.oldQuery,e)&&this.oldClass===t&&i.deepEqual(this.oldOptions,n)}}class a{constructor(e,t){this.client=e,this.accountIdValue=t}static create(e,t){return o(this,void 0,void 0,(function*(){return new a(t,e)}))}findAll(e,t,n){return o(this,void 0,void 0,(function*(){return yield(yield this.client()).findAll(e,t,n)}))}tx(e){return o(this,void 0,void 0,(function*(){return yield(yield this.client()).tx(e).catch((e=>this.handleError(e)))}))}notifyTx(e){return o(this,void 0,void 0,(function*(){return yield(yield this.client()).notifyTx(e).catch((e=>this.handleError(e)))}))}query(e,t,n,o,r){return void 0!==e?(e.update(t,n,r),e):this.liveQuery(t,n,o,r)}accountId(){return this.accountIdValue}createDoc(e,t,n,r,i){return o(this,void 0,void 0,(function*(){return yield(yield this.client()).createDoc(e,t,n,r,i).catch((e=>{throw this.handleError(e),e}))}))}createShortRef(e,t,n){return o(this,void 0,void 0,(function*(){return yield(yield this.client()).createShortRef(e,t,n)}))}updateDoc(e,t,n,r,i){return o(this,void 0,void 0,(function*(){return yield(yield this.client()).updateDoc(e,t,n,r,i).catch((e=>this.handleError(e)))}))}removeDoc(e,t,n,r){return o(this,void 0,void 0,(function*(){return yield(yield this.client()).removeDoc(e,t,n,r).catch((e=>this.handleError(e)))}))}liveQuery(e,t,n,o){const r=new s(this.client,n);return r.update(e,t,o),{update:(e,t,n)=>r.update(e,t,n),unsubscribe:()=>{var e;null===(e=r.unsubscribe)||void 0===e||e.call(r)}}}handleError(e){throw console.error(e),e}}t.PresentationClient=a,t.default=r.plugin("presentation",{},{})}}]);
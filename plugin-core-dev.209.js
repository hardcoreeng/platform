/*! For license information please see plugin-core-dev.209.js.LICENSE.txt */
"use strict";(self.webpackChunkprod=self.webpackChunkprod||[]).push([[209],{61669:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=a(31612),o=a(69882),c=a(8445),l=a(76572),n=a(53975),r=a(69089),i=a(76111),d=a(27707),u=a(89058),f=a(90470),p=new s.Builder;o.createModel(p),c.createModel(p),l.createModel(p),n.createModel(p),d.createModel(p),r.createModel(p),i.createModel(p),u.createModel(p),f.createModel(p),t.default=p},89058:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=t.TDerivedEvent=t.TEvent=t.TCalendar=void 0;const o=a(31612),c=a(69882),l=a(41350),n=a(8445),r=a(6904),i="calendar";let d=class extends c.TSpace{};d=s([o.Model(r.default.class.Calendar,c.default.class.Space,l.DOMAIN_MODEL)],d),t.TCalendar=d;let u=class extends c.TDoc{};u=s([o.Model(r.default.class.Event,c.default.class.Doc,i)],u),t.TEvent=u;let f=class extends u{};f=s([o.Model(r.default.class.DerivedEvent,r.default.class.Event,i)],f),t.TDerivedEvent=f,t.createModel=function(e){e.createModel(d,u,f),e.createDoc(n.default.class.Application,{label:r.default.string.App,icon:r.default.icon.Calendar,navigatorModel:{spaces:[{label:r.default.string.Calendar,spaceIcon:r.default.icon.Calendar,spaceClass:r.default.class.Calendar,addSpaceLabel:r.default.string.AddCalendar,createComponent:r.default.component.CreateCalendar,userSpace:{name:"Personal",description:"Personal calendar",members:[],private:!0},item:{createComponent:r.default.component.CreateEvent,editComponent:r.default.component.EditEvent}}],spaceView:r.default.component.Workspace}}),e.createDoc(c.default.class.DerivedDataDescriptor,{targetClass:r.default.class.DerivedEvent,sourceClass:r.default.class.Event,mapper:r.default.mapper.defaultMapper}),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:r.default.class.Event,targetClass:c.default.class.Title,rules:[{sourceField:"name",targetField:"title"}]},r.default.dd.NameTitleIndex)}},76572:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=t.TComment=t.TMessage=t.TChannel=void 0;const o=a(31612),c=a(69882),l=a(8445),n=a(41245),r=a(35407),i="chunter";let d=class extends c.TSpace{};d=s([o.Model(n.default.class.Channel,c.default.class.Space)],d),t.TChannel=d;let u=class extends c.TDoc{};u=s([o.Model(n.default.class.Message,c.default.class.Doc,i)],u),t.TMessage=u;let f=class extends c.TDoc{};f=s([o.Model(n.default.class.Comment,c.default.class.Doc,i)],f),t.TComment=f,t.createModel=function(e){e.createModel(d,u,f),e.createDoc(l.default.class.Application,{label:n.default.string.ApplicationLabelChunter,icon:n.default.icon.Chunter,navigatorModel:{specials:[{label:n.default.string.MessagesSpecial,component:n.default.component.CreateMessage,icon:n.default.icon.Chunter},{label:n.default.string.ThreadsSpecial,component:n.default.component.ThreadsView,icon:n.default.icon.Hashtag}],spaces:[{label:n.default.string.Starred,hideIfEmpty:!0,spaceIcon:n.default.icon.Hashtag,spaceClass:n.default.class.Channel,spaceQuery:{"account.starred":!0},addSpaceLabel:n.default.string.CreateChannel,spaceItem:n.default.component.SpaceItem,spaceHeader:n.default.component.SpaceHeader},{label:n.default.string.Channels,spaceIcon:n.default.icon.Hashtag,spaceClass:n.default.class.Channel,spaceQuery:{direct:!1,"account.starred":{$ne:!0}},addSpaceLabel:n.default.string.CreateChannel,createComponent:n.default.component.CreateChannel,spaceItem:n.default.component.SpaceItem,spaceHeader:n.default.component.SpaceHeader,item:{editComponent:n.default.component.ThreadsView}},{label:n.default.string.DirectMessages,spaceIcon:n.default.icon.Hashtag,spaceClass:n.default.class.Channel,spaceQuery:{direct:!0,"account.starred":{$ne:!0}},addSpaceLabel:n.default.string.CreateDirectMessage,spaceItem:n.default.component.SpaceItem,spaceHeader:n.default.component.SpaceHeader,item:{editComponent:n.default.component.ThreadsView}}],spaceView:n.default.component.ChannelView}},n.default.app.Chunter),e.createDoc(n.default.class.Channel,{name:"general",description:"General Channel",private:!1,members:[],direct:!1},n.default.channel.General),e.createDoc(n.default.class.Channel,{name:"random",description:"Random Talks",private:!1,members:[],direct:!1},n.default.channel.Random),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:n.default.class.Message,targetClass:c.default.class.Reference,rules:[{sourceField:"message",targetField:"link",pattern:{pattern:c.MARKDOWN_REFERENCE_PATTERN.source,multDoc:!0}}]},n.default.dd.MessageReferences),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:n.default.class.Comment,targetClass:c.default.class.Reference,rules:[{sourceField:"message",targetField:"link",pattern:{pattern:c.MARKDOWN_REFERENCE_PATTERN.source,multDoc:!0}}]},n.default.dd.CommentReferences),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:n.default.class.Comment,targetClass:n.default.class.Message,collections:[{sourceField:"replyOf",targetField:"comments",rules:[{sourceField:"modifiedBy",targetField:"userId"},{sourceField:"modifiedOn",targetField:"lastModified"}]}]},n.default.dd.ReplyOf),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:n.default.class.Message,targetClass:r.default.class.SpaceNotifications,collections:[{sourceField:"message",targetField:"notificatedObjects",sourceFieldPattern:{pattern:c.MARKDOWN_MENTION_PATTERN.source,multDoc:!0,group:1}}]}),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:n.default.class.Comment,targetClass:r.default.class.SpaceNotifications,collections:[{sourceField:"message",targetField:"notificatedObjects",sourceFieldPattern:{pattern:c.MARKDOWN_MENTION_PATTERN.source,multDoc:!0,group:1}}]})}},41245:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=a(56892),o=a(98097);t.default=o.mergeIds(s.default,{component:{CreateChannel:"",CreateMessage:"",ChannelView:"",ThreadsView:"",AllThreadsView:"",SpaceItem:"",SpaceHeader:""},string:{ApplicationLabelChunter:""},channel:{General:"",Random:""},dd:{MessageReferences:"",CommentReferences:"",ReplyOf:""}})},35909:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=a(31612),o=a(98097);t.default=o.mergeIds(s.default,{class:{Mixin:""}})},7463:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TMixin=t.TClass=t.TDoc=t.TObj=void 0;const o=a(41350),c=a(31612),l=a(35909);let n=class{};n=s([c.Model(l.default.class.Obj,l.default.class.Obj)],n),t.TObj=n;let r=class extends n{};r=s([c.Model(l.default.class.Doc,l.default.class.Obj)],r),t.TDoc=r;let i=class extends r{};i=s([c.Model(l.default.class.Class,l.default.class.Doc,o.DOMAIN_MODEL)],i),t.TClass=i;let d=class extends i{};d=s([c.Model(l.default.class.Mixin,l.default.class.Class)],d),t.TMixin=d},58612:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TShortRef=t.TReference=t.MARKDOWN_MENTION_PATTERN=t.MARKDOWN_REFERENCE_PATTERN=t.TTitle=t.TDerivedDataDescriptor=t.TDerivedData=void 0;const o=a(41350),c=a(31612),l=a(35909),n=a(7463),r="title";let i=class extends n.TDoc{};i=s([c.Model(l.default.class.DerivedData,l.default.class.Doc)],i),t.TDerivedData=i;let d=class extends n.TDoc{};d=s([c.Model(l.default.class.DerivedDataDescriptor,l.default.class.Doc,o.DOMAIN_MODEL)],d),t.TDerivedDataDescriptor=d;let u=class extends i{};u=s([c.Model(l.default.class.Title,l.default.class.DerivedData,r)],u),t.TTitle=u,t.MARKDOWN_REFERENCE_PATTERN=/\[([a-zA-Z-\d]+)\]\(ref:\/\/([a-zA-Z.]+)#([a-zA-Z-\d]+)\)/g,t.MARKDOWN_MENTION_PATTERN=/\(ref:\/\/core.Account#([\w:.-]+)\)/g;let f=class extends i{};f=s([c.Model(l.default.class.Reference,l.default.class.DerivedData,o.DOMAIN_REFERENCES)],f),t.TReference=f;let p=class extends u{};p=s([c.Model(l.default.class.ShortRef,l.default.class.Title,r)],p),t.TShortRef=p},69882:function(e,t,a){var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),o=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||s(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=t.default=void 0;const c=a(35909);t.default=c.default;const l=a(7463),n=a(58612),r=a(57570),i=a(59275),d=a(66660);o(a(7463),t),o(a(59275),t),o(a(66660),t),o(a(58612),t),o(a(57570),t),t.createModel=function(e){e.createModel(l.TObj,l.TDoc,l.TClass,l.TMixin,d.TTx,d.TTxCreateDoc,d.TTxUpdateDoc,d.TTxRemoveDoc,i.TSpace,i.TAccount,n.TDerivedData,n.TDerivedDataDescriptor,n.TTitle,n.TReference,n.TShortRef,r.TDocumentPresenter)}},57570:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TDocumentPresenter=void 0;const o=a(41350),c=a(31612),l=a(35909),n=a(7463);let r=class extends n.TDoc{};r=s([c.Model(l.default.class.DocumentPresenter,l.default.class.Doc,o.DOMAIN_MODEL)],r),t.TDocumentPresenter=r},59275:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TAccount=t.TSpace=void 0;const o=a(41350),c=a(31612),l=a(35909),n=a(7463);let r=class extends n.TDoc{};r=s([c.Model(l.default.class.Space,l.default.class.Doc,o.DOMAIN_MODEL)],r),t.TSpace=r;let i=class extends n.TDoc{};i=s([c.Model(l.default.class.Account,l.default.class.Doc,o.DOMAIN_MODEL)],i),t.TAccount=i},66660:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TTxRemoveDoc=t.TTxUpdateDoc=t.TTxCreateDoc=t.TTx=void 0;const o=a(41350),c=a(31612),l=a(35909),n=a(7463);let r=class extends n.TDoc{};r=s([c.Model(l.default.class.Tx,l.default.class.Doc,o.DOMAIN_TX)],r),t.TTx=r;let i=class extends r{};i=s([c.Model(l.default.class.TxCreateDoc,l.default.class.Tx)],i),t.TTxCreateDoc=i;let d=class extends r{};d=s([c.Model(l.default.class.TxUpdateDoc,l.default.class.Tx)],d),t.TTxUpdateDoc=d;let u=class extends r{};u=s([c.Model(l.default.class.TxRemoveDoc,l.default.class.Tx)],u),t.TTxRemoveDoc=u},33636:function(e,t,a){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.demoAccount=t.accountIds=void 0;const o=s(a(41350)),c=s(a(77776));t.accountIds=[],t.demoAccount=function(e){e.createDoc(o.default.class.Account,{email:"system",name:"System user",avatar:c.default.image.avatar()},o.default.account.System);for(let a=0;a<11;a++){const s=`demo_account_id${a}`;e.createDoc(o.default.class.Account,{email:c.default.internet.email(),name:c.default.internet.userName(),avatar:c.default.image.avatar()},s),t.accountIds.push(s)}}},25831:function(e,t,a){var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.demoChunter=void 0;const n=l(a(56892)),r=c(a(41350)),i=a(98097),d=l(a(77776)),u=a(33636),f=i.component("demo-task",{project:{DemoChannel:""}});t.demoChunter=function(e,t){const a=[r.default.account.System,...u.accountIds];e.createDoc(n.default.class.Channel,{name:"PL-CHANNEL",description:"Demo Channel",members:a,direct:!1,private:!1},f.project.DemoChannel);for(let t=0;t<7;t++){let s=d.default.random.arrayElements(a,d.default.datatype.number(a.length)+1);s.includes(r.default.account.System)||(s=[r.default.account.System,...s]),e.createDoc(n.default.class.Channel,{name:"direct-message",description:"My direct mesage",members:s,direct:!0,private:!0},`dmc-${t}`)}const s=[2,0,4,7,20,30,1,2,3,1];let o=0;for(let a=0;a<10;a++){const c=`mid-${a}`,l=[],i=s[a];for(let t=0;t<i;t++){const t=d.default.random.arrayElement(u.accountIds),a="cid-"+o++;l.push({_id:a,userId:t,createOn:Date.now(),lastModified:Date.now()}),e.createDoc(n.default.class.Comment,{replyOf:r.getFullRef(c,n.default.class.Message),message:d.default.lorem.paragraphs(2)},a,{space:f.project.DemoChannel,modifiedOn:Date.now(),createOn:Date.now(),modifiedBy:t})}let p=d.default.lorem.paragraphs(3);9===a&&(p=d.default.lorem.paragraphs(1),p+=`Hello [${t[0].shortRefId}](ref://task.Task#${t[0]._id})`,p+=`\nHello2 [${t[1].shortRefId}](ref://task.Task#${t[1]._id})`,p+=d.default.lorem.paragraphs(1)),8===a&&(p=d.default.lorem.paragraphs(1),p+="Youtube Page [Demo page](https://www.youtube.com/watch?v=LXb3EKWsInQ)",p+=d.default.lorem.paragraphs(1)),7===a&&(p=d.default.lorem.paragraphs(1),p+="Github link [#261](https://github.com/hardcoreeng/platform/issues/261)",p+=d.default.lorem.paragraphs(1)),e.createDoc(n.default.class.Message,{message:p,comments:l},c,{space:f.project.DemoChannel,modifiedBy:d.default.random.arrayElement(u.accountIds),modifiedOn:Date.now(),createOn:Date.now()})}}},99198:function(e,t,a){var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&s(t,e,a);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.demoTask=void 0;const n=l(a(56892)),r=c(a(41350)),i=a(98097),d=c(a(1808)),u=l(a(77776)),f=a(33636),p=i.component("demo-task",{project:{DemoProject:""}});t.demoTask=function(e){const t=[r.default.account.System,...f.accountIds];e.createDoc(d.default.class.Project,{name:"PL-DEMO",description:"Demo Task project",members:t,private:!1},p.project.DemoProject);const a=[1,4,2,0,10,1,5],s=[2,5,1,0,2,0,3],o=[];let c=0;for(let l=0;l<7;l++){const i=`tid-${l}`,m=`TSK-${l}`;e.createDoc(r.default.class.ShortRef,{title:`TSK-${l}`,objectClass:d.default.class.Task,objectId:i,descriptorId:"#shortRef",namespace:"TSK",counter:l},m,{space:p.project.DemoProject,modifiedOn:Date.now(),createOn:Date.now()});const h=[];for(let e=0;e<a[l];e++)h.push({description:`do ${u.default.commerce.productDescription()}`,done:u.default.datatype.boolean()});const D=[];for(let t=0;t<s[l];t++){const t="t-cid-"+c++,a=u.default.random.arrayElement(f.accountIds);e.createDoc(n.default.class.Comment,{message:u.default.lorem.paragraphs(3),replyOf:r.getFullRef(i,d.default.class.Task)},t,{space:p.project.DemoProject,modifiedBy:a,modifiedOn:Date.now(),createOn:Date.now()}),D.push({_id:t,userId:a,createOn:Date.now(),lastModified:Date.now()})}o.push(e.createDoc(d.default.class.Task,{name:`Do ${u.default.commerce.productName()}`,description:`do ${u.default.commerce.productDescription()}`,status:u.default.random.arrayElement([d.TaskStatuses.Open,d.TaskStatuses.InProgress,d.TaskStatuses.Closed]),shortRefId:m,checkItems:h,assignee:u.default.random.arrayElement(t),comments:D,dueTo:u.default.date.soon()},i,{space:p.project.DemoProject}))}return o}},21705:function(e,t,a){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(a(61669)),c=a(33636),l=a(25831),n=a(99198);c.demoAccount(o.default);const r=n.demoTask(o.default);l.demoChunter(o.default,r),t.default=o.default},53975:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.templateFSM=t.FSMBuilder=t.createModel=t.TWithFSM=t.TTransition=t.TState=t.TFSMItem=t.TFSM=void 0;const o=a(31612),c=a(30248),l=a(69882),n=a(41350);let r=class extends l.TDoc{};r=s([o.Model(c.default.class.FSM,l.default.class.Doc,n.DOMAIN_MODEL)],r),t.TFSM=r;let i=class extends l.TDoc{};i=s([o.Model(c.default.class.FSMItem,l.default.class.Doc,"fsm")],i),t.TFSMItem=i;let d=class extends l.TDoc{};d=s([o.Model(c.default.class.State,l.default.class.Doc,n.DOMAIN_MODEL)],d),t.TState=d;let u=class extends l.TDoc{};u=s([o.Model(c.default.class.Transition,l.default.class.Doc,n.DOMAIN_MODEL)],u),t.TTransition=u;let f=class extends l.TSpace{};f=s([o.Model(c.default.class.WithFSM,l.default.class.Space)],f),t.TWithFSM=f,t.createModel=function(e){e.createModel(r,d,u,i,f)};class p{constructor(e,t){this.states=new Map,this.transitions=[],this.genColor=function*(){for(;;)yield*["var(--primary-color-pink)","var(--primary-color-purple-01)","var(--primary-color-orange-01)","var(--primary-color-skyblue)","var(--primary-color-purple-02)","var(--primary-color-orange-02)","var(--primary-color-purple-03)"]}(),this.name=e,this.clazz=t}getState(e){return this.states.has(e.name)||this.states.set(e.name,e),this.states.get(e.name)}_transition(e,t){const a=this.getState(e),s=this.getState(t);return null==a||null==s||this.transitions.push([a.name,s.name]),this}transition(e,t){return(Array.isArray(t)?t:[t]).forEach((t=>this._transition(e,t))),this}build(e){const t=n.generateId();e.createDoc(c.default.class.FSM,{name:this.name,clazz:this.clazz,isTemplate:!0},t);const a=new Map;this.states.forEach((s=>{var o;const l=null!==(o=s.color)&&void 0!==o?o:this.genColor.next().value,r=n.generateId();e.createDoc(c.default.class.State,{...s,color:l,fsm:t},r),a.set(s.name,r)}));const s=[];return this.transitions.forEach((([o,l])=>{const r=a.get(o),i=a.get(l);if(null==r||null==i)return;const d=n.generateId();e.createDoc(c.default.class.Transition,{from:r,to:i,fsm:t},d),s.push(d)})),t}}t.FSMBuilder=p,t.templateFSM=(e,t)=>new p(e,t)},76111:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=t.TRoom=void 0;const o=a(31612),c=a(69882),l=a(8445),n=a(33468);let r=class extends c.TSpace{};r=s([o.Model(n.default.class.RoomSpace,c.default.class.Space)],r),t.TRoom=r,t.createModel=function(e){e.createModel(r),e.createDoc(l.default.class.Application,{label:n.default.string.ApplicationLabelMeeting,icon:n.default.icon.Meeting,navigatorModel:{spaces:[{label:n.default.string.Rooms,spaceIcon:n.default.icon.Hashtag,spaceClass:n.default.class.RoomSpace,addSpaceLabel:n.default.string.CreateChannel,createComponent:n.default.component.CreateChannel}],spaceView:n.default.component.WorkspaceComponent}},n.default.app.Meeting),e.createDoc(n.default.class.RoomSpace,{name:"Kitchen",description:"Kitchen Talks",private:!1,members:[]},n.default.room.Kitchen)}},33468:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=a(31379),o=a(98097);t.default=o.mergeIds(s.default,{string:{ApplicationLabelMeeting:"",CreateChannel:""},component:{CreateChannel:"",WorkspaceComponent:""},app:{Meeting:""},room:{Kitchen:""}})},90470:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=t.TSpaceInfo=t.TSpaceNotifications=void 0;const o=a(31612),c=a(69882),l=a(35407),n="notification";let r=class extends c.TDerivedData{};r=s([o.Model(l.default.class.SpaceNotifications,c.default.class.DerivedData,n)],r),t.TSpaceNotifications=r;let i=class extends c.TDerivedData{};i=s([o.Model(l.default.class.SpaceInfo,c.default.class.DerivedData,n)],i),t.TSpaceInfo=i,t.createModel=function(e){e.createModel(r,i),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:c.default.class.Doc,targetClass:l.default.class.SpaceInfo,mapper:l.default.mappers.SpaceInfo},l.default.dd.SpaceInfo),e.createDoc(c.default.class.DerivedDataDescriptor,{sourceClass:c.default.class.Space,targetClass:l.default.class.SpaceNotifications,mapper:l.default.mappers.SpaceNotification},l.default.dd.SpaceNotifications)},t.default=l.default},27707:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=void 0;const o=a(31612),c=a(69882),l=a(8445),n=a(53975),r=a(30248),i=a(91331),d="recruiting";let u=class extends c.TDoc{};u=s([o.Model(i.default.class.Candidate,c.default.class.Doc,d)],u);let f=class extends c.TSpace{};f=s([o.Model(i.default.class.CandidatePoolSpace,c.default.class.Space)],f);let p=class extends c.TDoc{};p=s([o.Model(i.default.class.Resume,c.default.class.Doc,d)],p);let m=class extends n.TFSMItem{};m=s([o.Model(i.default.class.Applicant,r.default.class.FSMItem)],m);let h=class extends n.TWithFSM{};h=s([o.Model(i.default.class.VacancySpace,r.default.class.WithFSM)],h),t.createModel=function(e){e.createModel(m,p,u,f,h),e.createDoc(l.default.class.Application,{label:i.default.string.App,icon:i.default.icon.Recruiting,navigatorModel:{spaces:[{label:i.default.string.Vacancies,spaceIcon:i.default.icon.Recruiting,spaceClass:i.default.class.VacancySpace,addSpaceLabel:i.default.string.AddVacancy,createComponent:i.default.component.CreateVacancy,item:{createComponent:i.default.component.CreateVacancy}},{label:i.default.string.Candidates,spaceIcon:i.default.icon.Recruiting,spaceClass:i.default.class.CandidatePoolSpace,addSpaceLabel:i.default.string.AddPoolSpace,createComponent:i.default.component.CreatePool,item:{createComponent:i.default.component.CreateCandidate,editComponent:i.default.component.EditCandidate}}],spaceView:i.default.component.WorkspaceComponent}},i.default.app.Recruiting);const t={rejected:{name:"Rejected"},applied:{name:"Applied"},hrInterview:{name:"HR interview"},testTask:{name:"Test Task"},techInterview:{name:"Technical interview"},offer:{name:"Offer"},contract:{name:"Contract signing"}};n.templateFSM("Default developer vacancy",i.default.class.VacancySpace).transition(t.applied,[t.hrInterview,t.rejected]).transition(t.hrInterview,[t.testTask,t.rejected]).transition(t.testTask,[t.techInterview,t.rejected]).transition(t.techInterview,[t.offer,t.rejected]).transition(t.offer,[t.contract,t.rejected]).transition(t.offer,t.rejected).build(e),n.templateFSM("Another default vacancy",i.default.class.VacancySpace).transition(t.applied,[t.techInterview,t.rejected]).transition(t.techInterview,[t.offer,t.rejected]).transition(t.offer,t.rejected).build(e)}},69089:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=t.TTask=t.TProject=void 0;const o=a(56892),c=a(41350),l=a(31612),n=a(69882),r=a(35407),i=a(8445),d=a(76335);let u=class extends n.TSpace{};u=s([l.Model(d.default.class.Project,n.default.class.Space)],u),t.TProject=u;let f=class extends n.TDoc{};f=s([l.Model(d.default.class.Task,n.default.class.Doc,"task")],f),t.TTask=f,t.createModel=function(e){e.createModel(u,f),e.createDoc(i.default.class.Application,{label:d.default.string.ApplicationLabelTask,icon:d.default.icon.Task,navigatorModel:{specials:[{label:d.default.string.MyTasks,component:d.default.component.MyTasksView,icon:d.default.icon.Task},{label:d.default.string.Favorite,component:d.default.component.FavoriteView,icon:d.default.icon.Star}],spaces:[{label:d.default.string.Projects,spaceIcon:d.default.icon.Task,spaceClass:d.default.class.Project,addSpaceLabel:d.default.string.CreateProject,createComponent:d.default.component.CreateProject,item:{createComponent:d.default.component.CreateTask,editComponent:d.default.component.EditTask}}],spaceView:d.default.component.ProjectView}},d.default.ids.Application),e.createDoc(d.default.class.Project,{name:"default",description:"Default Project",private:!1,members:[]},d.default.space.Default),e.createDoc(n.default.class.DerivedDataDescriptor,{sourceClass:d.default.class.Task,targetClass:n.default.class.Title,rules:[{sourceField:"name",targetField:"title"}]},d.default.dd.NameTitleIndex),e.createDoc(n.default.class.DerivedDataDescriptor,{sourceClass:d.default.class.Task,targetClass:n.default.class.Reference,rules:[{sourceField:"description",targetField:"link",pattern:{pattern:n.MARKDOWN_REFERENCE_PATTERN.source,multDoc:!0}}]},d.default.dd.ReferencesIndex),e.createDoc(n.default.class.DerivedDataDescriptor,{sourceClass:o.default.class.Comment,targetClass:d.default.class.Task,collections:[{sourceField:"replyOf",targetField:"comments"},{sourceField:"modifiedOn",targetField:"lastModified"}]},d.default.dd.ReplyOf),e.createDoc(n.default.class.DerivedDataDescriptor,{sourceClass:d.default.class.Task,targetClass:r.default.class.SpaceNotifications,collections:[{sourceField:"description",targetField:"notificatedObjects",sourceFieldPattern:{pattern:n.MARKDOWN_MENTION_PATTERN.source,multDoc:!0,group:1}}]}),e.createDoc(n.default.class.DocumentPresenter,{objectClass:d.default.class.Task,presentation:{Link:{component:d.default.component.TaskRefView,description:"Task Ref",mode:c.PresentationMode.Link},Preview:{component:d.default.component.TaskPreview,description:"Task Preview",mode:c.PresentationMode.Preview}}})}},76335:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=a(1808),o=a(98097);t.default=o.mergeIds(s.default,{component:{CreateProject:"",ProjectView:"",MyTasksView:"",FavoriteView:"",CreateTask:"",EditTask:"",TaskPreview:"",TaskRefView:""},ids:{Application:""},space:{Default:""},dd:{NameTitleIndex:"",ReferencesIndex:"",ReplyOf:""}})},8445:function(e,t,a){var s=this&&this.__decorate||function(e,t,a,s){var o,c=arguments.length,l=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(l=(c<3?o(l):c>3?o(t,a,l):o(t,a))||l);return c>3&&l&&Object.defineProperty(t,a,l),l};Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=t.TApplication=void 0;const o=a(41350),c=a(31612),l=a(69882),n=a(7356);let r=class extends l.TDoc{};r=s([c.Model(n.default.class.Application,l.default.class.Doc,o.DOMAIN_MODEL)],r),t.TApplication=r,t.createModel=function(e){e.createModel(r)},t.default=n.default},7356:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=a(35107);t.default=s.default},80428:function(e,t,a){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(a(41350)),c=a(98097);t.default=c.mergeIds(o.default,{class:{TypeString:""}})},43895:function(e,t,a){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypeString=t.Builder=t.Model=t.Prop=void 0;const o=a(41350),c=a(41350),l=s(a(73993)),n=s(a(80428)),r=new Map;function i(e){const t=r.get(e);if(void 0===t){const t={txes:[]};return r.set(e,t),t}return t}function d(e,t){return t.map((t=>({_id:c.generateId(),objectId:e,...t})))}function u(e,t,a,s,o){var l,r,i,d;return{_id:c.generateId(),_class:n.default.class.TxCreateDoc,space:n.default.space.Tx,modifiedBy:null!==(l=null==o?void 0:o.modifiedBy)&&void 0!==l?l:n.default.account.System,modifiedOn:null!==(r=null==o?void 0:o.modifiedOn)&&void 0!==r?r:0,createOn:null!==(i=null==o?void 0:o.createOn)&&void 0!==i?i:0,objectId:null!=s?s:c.generateId(),objectClass:e,objectSpace:null!==(d=null==o?void 0:o.space)&&void 0!==d?d:n.default.space.Model,attributes:a}}t.Prop=function(e){return function(t,a){const s=i(t),o={_class:n.default.class.TxCreateDoc,space:n.default.space.Tx,modifiedBy:n.default.account.System,modifiedOn:0,createOn:0,objectSpace:n.default.space.Model,objectClass:n.default.class.Attribute,attributes:{type:e,name:a,attributeOf:s._id}};s.txes.push(o)}},t.Model=function(e,t,a){return function(s){const o=i(s.prototype);o._id=e,o.extends=e!==n.default.class.Obj?t:void 0,o.domain=a}},t.Builder=class{constructor(){this.txes=[],this.hierarchy=new c.Hierarchy}createModel(...e){const t=e.map((e=>i(e.prototype))),a=new Map;t.forEach((e=>{a.set(e._id,e)}));const s=this.generateTransactions(t,a);for(const e of s)this.txes.push(e),this.hierarchy.tx(e)}generateTransactions(e,t){const a=this.createGraph(e);return l.default(a).reverse().map((e=>t.get(e))).flatMap((e=>null!=e?function(e){const t=e._id;return[u(n.default.class.Class,c.DOMAIN_MODEL,{domain:e.domain,kind:c.ClassifierKind.CLASS,extends:e.extends},t),...d(t,e.txes)]}(e):[]))}createGraph(e){return e.map((e=>[e._id,e.extends]))}createDoc(e,t,a,s){const c=u(e,this.hierarchy.getDomain(e),t,a,s);return this.txes.push(c),o.TxProcessor.createDoc2Doc(c)}getTxes(){return this.txes}},t.TypeString=function(){return{_class:n.default.class.TypeString}}},31612:function(e,t,a){var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),o=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||s(t,e,a)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(a(43895),t);var l=a(80428);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c(l).default}})},66866:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LiveQuery=void 0;const s=a(41350),o=a(47715);class c extends s.TxProcessor{constructor(e){super(),this.client=e,this.queries=new Map}isDerived(e,t){return this.client.isDerived(e,t)}match(e,t){if(!this.isDerived(t._class,e._class))return!1;for(const a in e.query){const o=e.query[a];if(0===s.findProperty([t],a,o).length)return!1}return!0}async findAll(e,t,a){return await this.client.findAll(e,t,a)}query(e,t,a,c){const l=this.client.findAll(e,t,c),n={_id:s.generateId(),_class:e,query:t,result:l,total:0,options:c,callback:a};return this.queries.set(n._id,n),l.then((e=>{n.result=o.default(e),n.total=e.total,n.callback(o.default(e))})).catch((e=>{console.log("failed to update Live Query: ",e)})),()=>{this.queries.delete(n._id)}}matchQuery(e,t){if(!this.isDerived(e._class,t.objectClass))return!1;for(const a in e.query){const o=e.query[a];if(1===s.findProperty([t.operations],a,o).length)return!0}return!1}async txUpdateDoc(e){for(const t of this.queries.values()){if(t.result instanceof Promise){const e=await t.result;t.result=o.default(e),t.total=e.total}const a=t.result.findIndex((t=>t._id===e.objectId));if(-1!==a){const s=t.result[a],o=this.doUpdateDoc(s,e);this.match(t,o)?t.result[a]=o:(t.result.splice(a,1),t.total--),this.sort(t,e),await this.callback(o,t)}else this.matchQuery(t,e)&&await this.refresh(t)}}async txCreateDoc(e){var t,a,c,l;const n=s.TxProcessor.createDoc2Doc(e);for(const e of this.queries.values())if(this.match(e,n)){if(e.result instanceof Promise){const t=await e.result;e.result=o.default(t),e.total=t.total}e.result.push(n),e.total++,void 0!==(null===(t=e.options)||void 0===t?void 0:t.sort)&&s.resultSort(e.result,null===(a=e.options)||void 0===a?void 0:a.sort),void 0!==(null===(c=e.options)||void 0===c?void 0:c.limit)&&e.result.length>e.options.limit?(null===(l=e.result.pop())||void 0===l?void 0:l._id)!==n._id&&e.callback(Object.assign(o.default(e.result),{total:e.total})):e.callback(Object.assign(o.default(e.result),{total:e.total}))}}async txRemoveDoc(e){var t;for(const a of this.queries.values()){if(a.result instanceof Promise){const e=await a.result;a.result=o.default(e),a.total=e.total}const s=a.result.findIndex((t=>t._id===e.objectId));if(void 0!==(null===(t=a.options)||void 0===t?void 0:t.limit)&&a.options.limit===a.result.length&&this.isDerived(a._class,e.objectClass))return await this.refresh(a);s>-1&&(a.result.splice(s,1),a.callback(Object.assign(o.default(a.result),{total:a.total})))}}async tx(e){await this.client.tx(e)}async notifyTx(e){await super.tx(e)}doUpdateDoc(e,t){const a=o.default(e),c=t.operations;for(const e in c)e.startsWith("$")?s.getOperator(e)(a,c[e]):a[e]=o.default(c[e]);return a.modifiedBy=t.modifiedBy,a.modifiedOn=t.modifiedOn,a}async refresh(e){const t=await this.client.findAll(e._class,e.query,e.options);e.result=o.default(t),e.total=t.total,e.callback(o.default(t))}sort(e,t){var a;const o=null===(a=e.options)||void 0===a?void 0:a.sort;if(void 0===o)return;let c=void 0!==o.modifiedBy||void 0!==o.modifiedOn;c||(c=this.checkNeedSort(o,t)),c&&s.resultSort(e.result,o)}checkNeedSort(e,t){const a=t.operations;for(const t in a)if(t.startsWith("$")){for(const s in a[t])if(s in e)return!0}else if(t in e)return!0;return!1}async callback(e,t){var a,s;if(t.result=t.result,void 0!==(null===(a=t.options)||void 0===a?void 0:a.limit)&&t.total>t.options.limit&&(null===(s=t.result.pop())||void 0===s?void 0:s._id)===e._id)return await this.refresh(t);t.callback(Object.assign(o.default(t.result),{total:t.total}))}}t.LiveQuery=c},35407:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationClient=void 0;const s=a(9479),o=a(47715);t.NotificationClient=class{constructor(e){this.client=e,this.lastPosition=0,this.lastTime=0,this.waitingUpdate=!1,this.autoscroll=!1,this.readObjects=new Set}async before(e,t,a,s){a!==this.prevId?(this.waitingUpdate&&void 0!==this.prevId&&null!=this.prevNotifications&&await this.updateLastRead(this.prevNotifications,s?this.prevId:void 0),this.prevId=a,this.prevNotifications=o.default(t),this.lastPosition=0,this.lastTime=0,this.autoscroll=!1):this.lastPosition=e.scrollTop}async readNow(e,t){this.lastTime=Date.now(),await this.updateLastRead(e,t)}initScroll(e,t,a){if(this.autoscroll)e.scrollTo(0,e.scrollHeight);else if(this.lastPosition>0)e.scrollTo(0,this.lastPosition);else{if(t>0){const s=e.getElementsByClassName("message");let o;for(let e=a?1:0;e<s.length;e++){const a=s[e];if(void 0===a)continue;const c=a.dataset.lastmodified;if(void 0!==c&&parseInt(c)>t){o=a;break}}if(void 0!==o)return void o.scrollIntoView(!1)}e.scrollTo(0,e.scrollHeight)}}scrollHandler(e,t,a,s,o){if(void 0===t)return;this.lastPosition=e.scrollTop;const c=e.getElementsByClassName("message"),l=e.getBoundingClientRect().bottom;for(let e=s?1:0;e<c.length;e++){const a=c[e];if(a.getBoundingClientRect().bottom>l)break;this.readObject(t,a.dataset)}this.lastTime>a&&(this.waitingUpdate||(this.waitingUpdate=!0,setTimeout((async()=>await this.updateLastRead(t,o)),3e3)))}setAutoscroll(e){this.autoscroll=this.lastPosition>0&&this.lastPosition>e.scrollHeight-e.clientHeight-30}readObject(e,t){if(void 0!==t.id){const a=t.id;e.notificatedObjects.includes(a)&&this.readObjects.add(a)}if(void 0!==t.modified){const e=parseInt(t.modified);this.lastTime=e>this.lastTime?e:this.lastTime}}async updateLastRead(e,t){if(void 0===e)return;const a={};void 0===t?a.lastRead=this.lastTime:(void 0===e.objectLastReads.set&&(e.objectLastReads=new Map),e.objectLastReads.set(t,this.lastTime),a.objectLastReads=e.objectLastReads),this.readObjects.size>0&&(a.$pull={notificatedObjects:{$in:Array.from(this.readObjects)}}),await this.client.updateDoc(e._class,e.space,e._id,a),this.waitingUpdate=!1,this.readObjects.clear()}},t.default=s.plugin("notification",{},{class:{SpaceNotifications:"",SpaceInfo:""},mappers:{SpaceInfo:"",SpaceNotification:""},dd:{SpaceInfo:"",SpaceNotifications:""}})},89419:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClientImpl=void 0;const s=a(41350),o=a(21705),c=a(47715),l=a(41350);class n extends s.TxProcessor{constructor(e,t,a){super(),this.hierarchy=e,this.model=t,this.transactions=a,this.handler=()=>{}}isDerived(e,t){return this.hierarchy.isDerived(e,t)}static createDerivedDataStorage(e,t){return{findAll:async(t,a)=>await e.findAll(t,a),tx:async a=>{await e.tx(a),t(a)}}}static async create(){const e=o.default.getTxes(),t=new s.Hierarchy;e.forEach((e=>t.tx(e)));const a=new s.TxDb(t),c=new s.ModelDb(t);for(const t of e)await a.tx(t);for(const t of e)await c.tx(t);return"undefined"!=typeof window&&console.info("Model Build complete",c),new n(t,c,a)}async findAll(e,t){return this.hierarchy.getClass(e).domain===s.DOMAIN_TX?await this.transactions.findAll(e,t):c.default(await this.model.findAll(e,t))}async tx(e){l.isModelTx(e)&&this.hierarchy.tx(e),await this.transactions.tx(e),"undefined"!=typeof window&&console.info("Model updated",this.model),this.handler(e)}async accountId(){return s.default.account.System}}t.ClientImpl=n},11271:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=a(41350),o=a(66866),c=a(89419);t.default=async()=>{let e;return{getClient:async function(){if(void 0===e){let t;const a=await c.ClientImpl.create(),l=await s.createClient((async e=>(a.handler=e,a)),(e=>{a.model.tx(e),null==t||t.notifyTx(e).catch((e=>console.error(e)))}));t=new o.LiveQuery(l),e=s.withOperations(s.default.account.System,t)}return e},disconnect:async()=>await Promise.resolve()}}}}]);
(self.webpackChunkprod=self.webpackChunkprod||[]).push([[81],{7715:function(t,e,i){t.exports=function(){"use strict";var t=Function.prototype.toString,e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,a=Object.getPrototypeOf,c=Object.prototype,l=c.hasOwnProperty,u=c.propertyIsEnumerable,d="function"==typeof o,f="function"==typeof WeakMap,h=function(i,n){if(!i.constructor)return e(null);var r=i.constructor,s=i.__proto__||a(i);if(r===n.Object)return s===n.Object.prototype?{}:e(s);if(~t.call(r).indexOf("[native code]"))try{return new r}catch(t){}return e(s)},p=function(t,e,i,n){var r=h(t,e);for(var s in n.set(t,r),t)l.call(t,s)&&(r[s]=i(t[s],n));if(d){var a=o(t),c=a.length;if(c)for(var f=0,p=void 0;f<c;f++)p=a[f],u.call(t,p)&&(r[p]=i(t[p],n))}return r},v=function(t,e,i,a){var c=h(t,e);a.set(t,c);var l=d?s(t).concat(o(t)):s(t),u=l.length;if(u)for(var f=0,p=void 0,v=void 0;f<u;f++)if("callee"!==(p=l[f])&&"caller"!==p)if(v=r(t,p)){v.get||v.set||(v.value=i(t[p],a));try{n(c,p,v)}catch(t){c[p]=v.value}}else c[p]=i(t[p],a);return c},y=Array.isArray,b="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i.g?i.g:void(console&&console.error&&console.error('Unable to locate global object, returning "this".'));function g(t,i){var n=!(!i||!i.isStrict),r=i&&i.realm||b,s=n?v:p,o=function(t,e){if(!t||"object"!=typeof t)return t;if(e.has(t))return e.get(t);var i,a,c,l=t.constructor;if(l===r.Object)return s(t,r,o,e);if(y(t)){if(n)return v(t,r,o,e);var u=t.length;i=new l,e.set(t,i);for(var d=0;d<u;d++)i[d]=o(t[d],e);return i}if(t instanceof r.Date)return new l(t.getTime());if(t instanceof r.RegExp)return(i=new l(t.source,t.flags||(a=t,c="",a.global&&(c+="g"),a.ignoreCase&&(c+="i"),a.multiline&&(c+="m"),a.unicode&&(c+="u"),a.sticky&&(c+="y"),c))).lastIndex=t.lastIndex,i;if(r.Map&&t instanceof r.Map)return i=new l,e.set(t,i),t.forEach((function(t,n){i.set(n,o(t,e))})),i;if(r.Set&&t instanceof r.Set)return i=new l,e.set(t,i),t.forEach((function(t){i.add(o(t,e))})),i;if(r.Blob&&t instanceof r.Blob)return t.slice(0,t.size,t.type);if(r.Buffer&&r.Buffer.isBuffer(t))return i=r.Buffer.allocUnsafe?r.Buffer.allocUnsafe(t.length):new l(t.length),e.set(t,i),t.copy(i),i;if(r.ArrayBuffer){if(r.ArrayBuffer.isView(t))return i=new l(t.buffer.slice(0)),e.set(t,i),i;if(t instanceof r.ArrayBuffer)return i=t.slice(0),e.set(t,i),i}return"function"==typeof t.then||t instanceof Error||r.WeakMap&&t instanceof r.WeakMap||r.WeakSet&&t instanceof r.WeakSet?t:s(t,r,o,e)};return o(t,function(){if(f)return new WeakMap;var t=e({has:function(e){return!!~t._keys.indexOf(e)},set:function(e,i){t._keys.push(e),t._values.push(i)},get:function(e){return t._values[t._keys.indexOf(e)]}});return t._keys=[],t._values=[],t}())}return g.default=g,g.strict=function(t,e){return g(t,{isStrict:!0,realm:e?e.realm:void 0})},g}()},5407:(t,e,i)=>{"use strict";e.k=void 0;const n=i(9479),r=i(7715);e.k=class{constructor(t){this.client=t,this.lastPosition=0,this.lastTime=0,this.waitingUpdate=!1,this.autoscroll=!1,this.readObjects=new Set}async before(t,e,i,n){i!==this.prevId?(this.waitingUpdate&&void 0!==this.prevId&&null!=this.prevNotifications&&await this.updateLastRead(this.prevNotifications,n?this.prevId:void 0),this.prevId=i,this.prevNotifications=r.default(e),this.lastPosition=0,this.lastTime=0,this.autoscroll=!1):this.lastPosition=t.scrollTop}async readNow(t,e){this.lastTime=Date.now(),await this.updateLastRead(t,e)}initScroll(t,e,i){if(this.autoscroll)t.scrollTo(0,t.scrollHeight);else if(this.lastPosition>0)t.scrollTo(0,this.lastPosition);else{if(e>0){const n=t.getElementsByClassName("message");let r;for(let t=i?1:0;t<n.length;t++){const i=n[t];if(void 0===i)continue;const s=i.dataset.lastmodified;if(void 0!==s&&parseInt(s)>e){r=i;break}}if(void 0!==r)return void r.scrollIntoView(!1)}t.scrollTo(0,t.scrollHeight)}}scrollHandler(t,e,i,n,r){if(void 0===e)return;this.lastPosition=t.scrollTop;const s=t.getElementsByClassName("message"),o=t.getBoundingClientRect().bottom;for(let t=n?1:0;t<s.length;t++){const i=s[t];if(i.getBoundingClientRect().bottom>o)break;this.readObject(e,i.dataset)}this.lastTime>i&&(this.waitingUpdate||(this.waitingUpdate=!0,setTimeout((async()=>await this.updateLastRead(e,r)),3e3)))}setAutoscroll(t){this.autoscroll=this.lastPosition>0&&this.lastPosition>t.scrollHeight-t.clientHeight-30}readObject(t,e){if(void 0!==e.id){const i=e.id;t.notificatedObjects.includes(i)&&this.readObjects.add(i)}if(void 0!==e.modified){const t=parseInt(e.modified);this.lastTime=t>this.lastTime?t:this.lastTime}}async updateLastRead(t,e){if(void 0===t)return;const i={};void 0===e?i.lastRead=this.lastTime:(void 0===t.objectLastReads.set&&(t.objectLastReads=new Map),t.objectLastReads.set(e,this.lastTime),i.objectLastReads=t.objectLastReads),this.readObjects.size>0&&(i.$pull={notificatedObjects:{$in:Array.from(this.readObjects)}}),await this.client.updateDoc(t._class,t.space,t._id,i),this.waitingUpdate=!1,this.readObjects.clear()}},e.ZP=n.plugin("notification",{},{class:{SpaceNotifications:"",SpaceInfo:""},mappers:{SpaceInfo:"",SpaceNotification:""},dd:{SpaceInfo:"",SpaceNotifications:""}})},4003:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.PresentationClient=void 0;const r=i(9479),s=i(2451),o=i(9862);class a{constructor(t,e){this.client=t,this.callback=e,o.onDestroy((()=>{var t;null===(t=this.unsubscribe)||void 0===t||t.call(this),this.unsubscribe=void 0}))}update(t,e,i){var n;this.checkParams(e,t,i)||(null===(n=this.unsubscribe)||void 0===n||n.call(this),this.oldQuery=e,this.oldClass=t,this.oldOptions=i,this.client().then((n=>{this.unsubscribe=n.query(t,e,this.callback,i)})).catch((t=>{console.error(t)})))}checkParams(t,e,i){return s.deepEqual(this.oldQuery,t)&&this.oldClass===e&&s.deepEqual(this.oldOptions,i)}}class c{constructor(t,e){this.client=t,this.accountIdValue=e}static create(t,e){return n(this,void 0,void 0,(function*(){return new c(e,t)}))}findAll(t,e,i){return n(this,void 0,void 0,(function*(){return yield(yield this.client()).findAll(t,e,i)}))}tx(t){return n(this,void 0,void 0,(function*(){return yield(yield this.client()).tx(t).catch((t=>this.handleError(t)))}))}notifyTx(t){return n(this,void 0,void 0,(function*(){return yield(yield this.client()).notifyTx(t).catch((t=>this.handleError(t)))}))}query(t,e,i,n,r){return void 0!==t?(t.update(e,i,r),t):this.liveQuery(e,i,n,r)}accountId(){return this.accountIdValue}createDoc(t,e,i,r,s){return n(this,void 0,void 0,(function*(){return yield(yield this.client()).createDoc(t,e,i,r,s).catch((t=>{throw this.handleError(t),t}))}))}createShortRef(t,e,i){return n(this,void 0,void 0,(function*(){return yield(yield this.client()).createShortRef(t,e,i)}))}updateDoc(t,e,i,r,s){return n(this,void 0,void 0,(function*(){return yield(yield this.client()).updateDoc(t,e,i,r,s).catch((t=>this.handleError(t)))}))}removeDoc(t,e,i,r){return n(this,void 0,void 0,(function*(){return yield(yield this.client()).removeDoc(t,e,i,r).catch((t=>this.handleError(t)))}))}liveQuery(t,e,i,n){const r=new a(this.client,i);return r.update(t,e,n),{update:(t,e,i)=>r.update(t,e,i),unsubscribe:()=>{var t;null===(t=r.unsubscribe)||void 0===t||t.call(r)}}}handleError(t){throw console.error(t),t}}e.PresentationClient=c,e.default=r.plugin("presentation",{},{})}}]);